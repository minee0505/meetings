
### 🗓️ 2025년 8월 11일 회의

| 항목 | 내용 |
| --- | --- |
| **주요 논의** | **`Meeting` 엔티티 및 DTO 설계 심화, 이미지 처리 방식 구체화, Enum을 통한 상태 관리 표준화** |
| **오늘의 To Do** | **확정된 엔티티/DTO 코드를 기반으로 모임 생성 API 구현 착수, 파일 업로드 서비스 로직 구체화, JPA 순환 참조 문제 해결** |

---

## 1️⃣ '모임 생성' 기능 흐름 및 데이터 처리 방식 확정

```
사용자 입력 (폼 제출) → 
  Controller (DTO & MultipartFile 수신) → 
    Service (이미지 저장 & URL 생성) → 
      Service (DTO+URL → Entity 변환) → 
        Repository (DB 저장) → 
          Controller (상세 페이지로 Redirect)
```

- **DTO 분리**: `MeetingCreateRequest` DTO는 클라이언트의 입력을 받는 역할로 한정.
- **이미지 처리**: 이미지 파일은 DB에 저장하지 않고, 서버 또는 클라우드 스토리지에 저장 후 **접근 가능한 `imageUrl`만** DB에 기록하는 방식으로 최종 확정.
- **상태 관리**: `status` 필드는 하드코딩된 문자열 대신, 타입 안정성이 보장되는 `MeetingStatus` Enum을 사용하기로 결정.

---

## 2️⃣ `Meeting` 엔티티 및 DTO 설계 심화 포인트

| 구분 | 설계 방향 및 최종 결정 |
| :--- | :--- |
| **`Meeting` 엔티티** | **`status` 필드를 `MeetingStatus` Enum 타입으로 변경하고, `@Enumerated(EnumType.STRING)`을 적용하여 데이터 무결성 확보.** <br/> Lombok `@ToString` 사용 시 발생할 수 있는 순환 참조 문제를 방지하기 위해, 연관관계 필드(`host`)를 `exclude` 처리하기로 함. |
| **`MeetingCreateRequest` DTO**| **클라이언트가 직접 입력하는 필드만 포함**하도록 구성. `imageUrl`과 `status`는 서버 로직에서 처리하므로 DTO에서 제외. <br/> Spring MVC의 데이터 바인딩을 위해 필요한 필드에만 `@Setter`를 개별적으로 적용하여 객체의 안정성 강화. |
| **`MeetingDetailResponse` DTO**| API 응답의 독립성과 안정성을 위해, **상세 조회 시 엔티티를 직접 노출하지 않고 `Response` DTO를 만들어 제공**하는 것이 Best Practice임을 확인. (상세 페이지 담당자와 협의하여 백엔드에서 제공하는 것으로 최종 조율 필요) |
| **이미지 관리** | 현재 요구사항은 '모임당 대표 이미지 하나'이므로, 별도의 `Image` 엔티티 없이 `Meeting` 엔티티 내 `imageUrl` 컬럼으로 관리. <br/> 향후 갤러리 기능 등 확장 시 `Image` 엔티티로 분리하는 리팩토링 고려. |

> ✅ **JPA Best Practice 적용**: `@Enumerated(EnumType.STRING)`, `@ToString(exclude = {...})`, 참조 타입 필드(`Integer`) 사용 등 코드 품질 향상을 위한 설계 원칙 적용.

---

## 3️⃣ '모임 생성' 유즈케이스 및 구현 순서 정리

| UC-ID | 유즈케이스 명 | 구현 순서 (논리적 흐름) |
| :--- | :--- | :--- |
| **FR-C-001** | **모임 생성** | 1. **DTO** 정의 (데이터 구조 설계) <br/> 2. **Service** 구현 (순수 비즈니스 로직) <br/> 3. **API Controller** 구현 (외부 연동) <br/> 4. **View** 구현 (UI 및 최종 연동) |

---

## 4️⃣ 주요 기술 이슈 및 해결 방안

| 단계 | 발생 가능 이슈 | 해결 방안 |
| :--- | :--- | :--- |
| **Entity 설계** | Lombok `@ToString`으로 인한 **순환 참조 및 `StackOverflowError`** | `@ToString(exclude = {"연관관계_필드"})`를 사용하여 toString() 생성 시 해당 필드를 제외. |
| **파일 업로드** | 파일명 중복으로 인한 덮어쓰기 문제 | **UUID를 사용하여 고유한 파일명을 생성**한 후 서버에 저장. |
| **빌드/컴파일**| Lombok 어노테이션 변경 후 메서드를 찾지 못하는 오류 | IDE 캐시 문제일 가능성이 높으므로, **프로젝트 리빌드 (`Rebuild Project`)**를 통해 해결. |
| **상태 관리** | 문자열 오타로 인한 데이터 불일치 및 버그 발생 | **Enum 타입을 도입**하여 컴파일 시점에 타입 체크를 강제하고, 코드의 안정성과 가독성 확보. |

---

## 회의 결론 및 느낀 점 요약

- 오늘은 `모임 생성`이라는 단일 기능 구현에 필요한 **엔티티와 DTO의 상세 설계부터 이미지 처리, 상태 관리 같은 실무적인 기술 이슈까지 깊이 있게 논의**했음.
- 단순 기능 구현을 넘어, **안정성과 확장성을 고려한 Best Practice를 코드에 적용하는 방향**으로 의견을 모았음.
- 이를 통해 이후 개발 과정에서 발생할 수 있는 잠재적 문제들을 사전에 방지하고, 더 높은 품질의 코드를 작성할 수 있는 기반을 마련함.